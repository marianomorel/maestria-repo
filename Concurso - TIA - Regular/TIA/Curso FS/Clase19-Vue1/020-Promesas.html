<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promesas (I)</title>

    <!-- Mi hoja de estilos externa -->
    <link rel="stylesheet" href="estilos.css">

    <!--CDN de Vue, version de desarrollo -->
    <script src="https://unpkg.com/vue@next"></script>
</head>

<body>
    <h1>Promesas (I)</h1>
    <p>Una <mark>promesa (promise)</mark>en JS es similar a una promesa en la vida real.
       Tiene <b>2 resultados posibles</b>: se mantendrá cuando llegue el momento, o no.
       Cuando definimos una promesa en JavaScript, se resolverá cuando llegue el momento,
       o será rechazada.</p>
       <hr>

    <p><b>Hay 3 estados para un objeto promise:</b><br><br>
       <b>Pendiente</b> (pending): estado inicial, antes de que la promesa tenga éxito o falle.<br>
       <b>Resuelto</b> (resolved): promesa completada.<br>
       <b>Rechazado</b> (rejected):  promesa fallida.</p>
       <p>Este ejemplo está basado en contenido de
        <a href="https://www.freecodecamp.org/espanol/news/promesas-en-javascript-es6/">www.freecodecamp.org</a></p>
    <hr>


    <script>
        // Creamos un objeto "promesa"
        // Contiene una funcion ("executor) con dos parámetros,
        // uno para el éxito (resolve) y otro para el error (rejected):
        let promesa = new Promise(function (resolve, rejected) {
            // Este if representa todo lo que puede hacer
            // una promesa. En este caso, solo hay un "if".
            // Si se cumple la condición, la Promesa se resolverá,
            // de lo contrario será rechazada.
            if (true) {
                resolve("Promesa cumplida.")
            } else {
                rejected("Ocurrió un error.")
            }
        })

        // Aqui termina la definición de la promesa.


        // Ahora utilizamos la promesa:
        //      Importante: la sintaxis es
        //           promesa.then().catch().finally
        //      pero se puede utilizar en varias lineas para que sea mas claro.
        promesa
        // Se llama al método then( ) después de que se resuelva la Promesa
        // Por ejemplo, mostramos el mensaje que obtuvimos de la Promesa:
        //(Este código se ejecuta si la promesa se resolvio ok).
        .then(function(respuesta) {
            document.write("Respuesta: ", respuesta)
            document.write("<br>")
        })

        // ¿Qué pasa si la Promesa falla? Se usa el método catch().
        // Este código se ejecuta solo su la promesa falló
        .catch(function(error){
            document.write("Error: ", error)
            document.write("<br>")
        })


        // Este código se ejecuta SIEMPRE, no importa que
        // resultado haya tenido la ejecución de la promesa.
        .finally(function(){
            document.write("Promesa procesada.")
            document.write("<br>")
        })

    </script>

</body>

</html>