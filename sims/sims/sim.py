from pyspice import PySpice
import matplotlib.pyplot as plt

sim_spice = """

*****************************************************
* Description
* -----------
*
*
*
*****************************************************

*****************************************************
* Library
*****************************************************
.include './lib/dig_0p25u_2p5V_stdcells_typ.inc'
*****************************************************

*****************************************************
* Netlist
*****************************************************

vdd VPOS 0 dc=2.5

* ---------------------------------------------
* Without considering RC parasitics
* ---------------------------------------------
v11   N01 0           dc=pulse(0 2.5 1n 0.1p)
xg11 (N01 N11 VPOS 0) inv_x1y1
xg21 (N11 N21 VPOS 0) inv_x1y1
* ---------------------------------------------

* ---------------------------------------------
* For calculation input capacitance of the inverter
* ---------------------------------------------
vp   N0P 0           dc=pulse(0 2.5 1n 0.1p)
xgp (N0P N1P VPOS 0) inv_x1y1
cp   N1P 0 c=4f
* ---------------------------------------------

* ---------------------------------------------
* For calculation output resistance of the inverter
* ---------------------------------------------
vp2  N0P2 0          dc=pulse(2.5 0 1n 0.1p)
rp2  N0P2 N1P2 r=25k
xcp (N1P2 N2P2 VPOS 0) inv_x1y1
* ---------------------------------------------

* ---------------------------------------------
* Considering order 1 RC model for parasitics
* ---------------------------------------------
v12   N02 0           dc=pulse(0 2.5 1n 0.1p)
xg12 (N02 N12 VPOS 0) inv_x1y1
r12   N12 N22 r=150
c12   N22 0   c=4f
xg22 (N22 N32 VPOS 0) inv_x1y1
* ---------------------------------------------

* ---------------------------------------------
* Considering order 2 RC model for parasitics
* ---------------------------------------------
v13   N03 0           dc=pulse(0 2.5 1n 0.1p)
xg13 (N03 N13 VPOS 0) inv_x1y1
r13   N13 N23 r=75
c13   N23 0   c=2f
r23   N23 N33 r=75
c23   N33 0   c=2f
xg23 (N33 N43 VPOS 0) inv_x1y1
* ---------------------------------------------

* ---------------------------------------------
* Considering order 4 RC model for parasitics
* ---------------------------------------------
v14   N04 0           dc=pulse(0 2.5 1n 0.1p)
xg14 (N04 N14 VPOS 0) inv_x1y1
r14   N14 N24 r=37.5
c14   N24 0   c=1f
r24   N24 N34 r=37.5
c24   N34 0   c=1f
r34   N34 N44 r=37.5
c34   N44 0   c=1f
r44   N44 N54 r=37.5
c44   N54 0   c=1f
xg24 (N54 N64 VPOS 0) inv_x1y1
* ---------------------------------------------

*****************************************************

*****************************************************
* Simulation
*****************************************************
.control

   destroy all
   set temp=25

   tran 0.1p 2n uic

   print v(N01)
   print v(N44)

.endc
*****************************************************

*****************************************************
* End file
*****************************************************
.end

"""

run = PySpice(sim_spice)
#print(run)

plt.plot(run.sim['v(N01)'].time, run.sim['v(N01)'].value)
plt.savefig('pepe.pdf')


#import numpy as np

#ypoints = np.ones(4022)

#plt.plot(ypoints, marker = 'o')
#plt.show()
